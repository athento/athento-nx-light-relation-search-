<?xml version="1.0" encoding="UTF-8"?>

<component name="org.athento.nuxeo.athento-nx-light-relations-search.contentview-cv" version="1.0.0">
	<require>org.nuxeo.runtime.started</require>
	
	<extension point="contentViews" target="org.nuxeo.ecm.platform.ui.web.ContentViewService">
	
	    <contentView name="relation_search">
	
	      <title>label.search.results</title>
	      <translateTitle>true</translateTitle>
	
	      <emptySentence>label.content.empty.search</emptySentence>
	      <translateEmptySentence>true</translateEmptySentence>
	
	      <coreQueryPageProvider>
	        <parameter>#{currentDocument.id}</parameter>
	        <property name="coreSession">#{documentManager}</property>
	        <whereClause docType="RelationSearch">
	
	          <predicate operator="FULLTEXT" parameter="dc:title">
	            <field name="dc_title" schema="relation_search"/>
	          </predicate>
	
	          <predicate operator="!=" parameter="ecm:currentLifeCycleState">
	            <field name="currentLifeCycleState" schema="relation_search"/>
	          </predicate>
	
	          <fixedPart>
	            ecm:uuid != ? AND ecm:mixinType != 'HiddenInNavigation' AND
	            ecm:mixinType != 'Folderish' AND ecm:isCheckedInVersion = 0
	          </fixedPart>
	        </whereClause>
	        <sort ascending="true" column="dc:title"/>
	        <pageSize>5</pageSize>
	      </coreQueryPageProvider>
	
	      <searchLayout name="relation_search"/>
	
	      <showPageSizeSelector>true</showPageSizeSelector>
	      <useGlobalPageSize>true</useGlobalPageSize>
	      <refresh>
	        <event>documentChanged</event>
	        <event>documentChildrenChanged</event>
	      </refresh>
	      <cacheKey>only_one_cache</cacheKey>
	      <cacheSize>1</cacheSize>
	
	      <resultLayouts>
	        <layout iconPath="/icons/document_listing_icon.png" name="relation_document_listing" title="document_listing" translateTitle="true"/>
	      </resultLayouts>
	
	    </contentView>
	
	  </extension>

	
	
</component>